// build time:Tue Jan 07 2020 15:15:28 GMT+0800 (GMT+08:00)
THREE.RenderableObject=function(){this.id=0;this.object=null;this.z=0;this.renderOrder=0};THREE.RenderableFace=function(){this.id=0;this.v1=new THREE.RenderableVertex;this.v2=new THREE.RenderableVertex;this.v3=new THREE.RenderableVertex;this.normalModel=new THREE.Vector3;this.vertexNormalsModel=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];this.vertexNormalsLength=0;this.color=new THREE.Color;this.material=null;this.uvs=[new THREE.Vector2,new THREE.Vector2,new THREE.Vector2];this.z=0;this.renderOrder=0};THREE.RenderableVertex=function(){this.position=new THREE.Vector3;this.positionWorld=new THREE.Vector3;this.positionScreen=new THREE.Vector4;this.visible=true};THREE.RenderableVertex.prototype.copy=function(e){this.positionWorld.copy(e.positionWorld);this.positionScreen.copy(e.positionScreen)};THREE.RenderableLine=function(){this.id=0;this.v1=new THREE.RenderableVertex;this.v2=new THREE.RenderableVertex;this.vertexColors=[new THREE.Color,new THREE.Color];this.material=null;this.z=0;this.renderOrder=0};THREE.RenderableSprite=function(){this.id=0;this.object=null;this.x=0;this.y=0;this.z=0;this.rotation=0;this.scale=new THREE.Vector2;this.material=null;this.renderOrder=0};THREE.Projector=function(){var e,r,t=[],n=0,i,o,a=[],s=0,l,c,u=[],p=0,f,E,v=[],d=0,h,m,R=[],x=0,y={objects:[],lights:[],elements:[]},T=new THREE.Vector3,H=new THREE.Vector4,w=new THREE.Box3(new THREE.Vector3((-1),(-1),(-1)),new THREE.Vector3(1,1,1)),g=new THREE.Box3,b=new Array(3),M=new Array(4),S=new THREE.Matrix4,z=new THREE.Matrix4,V,j=new THREE.Matrix4,O=new THREE.Matrix3,C=new THREE.Frustum,L=new THREE.Vector4,k=new THREE.Vector4;this.projectVector=function(e,r){console.warn("THREE.Projector: .projectVector() is now vector.project().");e.project(r)};this.unprojectVector=function(e,r){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject().");e.unproject(r)};this.pickingRay=function(e,r){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")};var N=function(){var e=[];var r=[];var t=null;var n=null;var o=new THREE.Matrix3;function s(i){t=i;n=t.material;o.getNormalMatrix(t.matrixWorld);e.length=0;r.length=0}function c(e){var r=e.position;var t=e.positionWorld;var n=e.positionScreen;t.copy(r).applyMatrix4(V);n.copy(t).applyMatrix4(z);var i=1/n.w;n.x*=i;n.y*=i;n.z*=i;e.visible=n.x>=-1&&n.x<=1&&n.y>=-1&&n.y<=1&&n.z>=-1&&n.z<=1}function u(e,r,t){i=F();i.position.set(e,r,t);c(i)}function p(r,t,n){e.push(r,t,n)}function E(e,t){r.push(e,t)}function v(e,r,t){if(e.visible===true||r.visible===true||t.visible===true)return true;b[0]=e.positionScreen;b[1]=r.positionScreen;b[2]=t.positionScreen;return w.intersectsBox(g.setFromPoints(b))}function d(e,r,t){return(t.positionScreen.x-e.positionScreen.x)*(r.positionScreen.y-e.positionScreen.y)-(t.positionScreen.y-e.positionScreen.y)*(r.positionScreen.x-e.positionScreen.x)<0}function h(e,r){var n=a[e];var i=a[r];f=A();f.id=t.id;f.v1.copy(n);f.v2.copy(i);f.z=(n.positionScreen.z+i.positionScreen.z)/2;f.renderOrder=t.renderOrder;f.material=t.material;y.elements.push(f)}function m(i,s,c){var u=a[i];var p=a[s];var f=a[c];if(v(u,p,f)===false)return;if(n.side===THREE.DoubleSide||d(u,p,f)===true){l=P();l.id=t.id;l.v1.copy(u);l.v2.copy(p);l.v3.copy(f);l.z=(u.positionScreen.z+p.positionScreen.z+f.positionScreen.z)/3;l.renderOrder=t.renderOrder;l.normalModel.fromArray(e,i*3);l.normalModel.applyMatrix3(o).normalize();for(var E=0;E<3;E++){var h=l.vertexNormalsModel[E];h.fromArray(e,arguments[E]*3);h.applyMatrix3(o).normalize();var m=l.uvs[E];m.fromArray(r,arguments[E]*2)}l.vertexNormalsLength=3;l.material=t.material;y.elements.push(l)}}return{setObject:s,projectVertex:c,checkTriangleVisibility:v,checkBackfaceCulling:d,pushVertex:u,pushNormal:p,pushUv:E,pushLine:h,pushTriangle:m}};var W=new N;this.projectScene=function(t,n,i,s){c=0;E=0;m=0;y.elements.length=0;if(t.autoUpdate===true)t.updateMatrixWorld();if(n.parent===null)n.updateMatrixWorld();S.copy(n.matrixWorldInverse.getInverse(n.matrixWorld));z.multiplyMatrices(n.projectionMatrix,S);C.setFromMatrix(z);r=0;y.objects.length=0;y.lights.length=0;function u(r){e=B();e.id=r.id;e.object=r;T.setFromMatrixPosition(r.matrixWorld);T.applyMatrix4(z);e.z=T.z;e.renderOrder=r.renderOrder;y.objects.push(e)}t.traverseVisible(function(e){if(e instanceof THREE.Light){y.lights.push(e)}else if(e instanceof THREE.Mesh||e instanceof THREE.Line){if(e.material.visible===false)return;if(e.frustumCulled===true&&C.intersectsObject(e)===false)return;u(e)}else if(e instanceof THREE.Sprite){if(e.material.visible===false)return;if(e.frustumCulled===true&&C.intersectsSprite(e)===false)return;u(e)}});if(i===true){y.objects.sort(G)}for(var p=0,v=y.objects.length;p<v;p++){var d=y.objects[p].object;var R=d.geometry;W.setObject(d);V=d.matrixWorld;o=0;if(d instanceof THREE.Mesh){if(R instanceof THREE.BufferGeometry){var x=R.attributes;var w=R.groups;if(x.position===undefined)continue;var g=x.position.array;for(var b=0,M=g.length;b<M;b+=3){W.pushVertex(g[b],g[b+1],g[b+2])}if(x.normal!==undefined){var N=x.normal.array;for(var b=0,M=N.length;b<M;b+=3){W.pushNormal(N[b],N[b+1],N[b+2])}}if(x.uv!==undefined){var U=x.uv.array;for(var b=0,M=U.length;b<M;b+=2){W.pushUv(U[b],U[b+1])}}if(R.index!==null){var q=R.index.array;if(w.length>0){for(var J=0;J<w.length;J++){var K=w[J];for(var b=K.start,M=K.start+K.count;b<M;b+=3){W.pushTriangle(q[b],q[b+1],q[b+2])}}}else{for(var b=0,M=q.length;b<M;b+=3){W.pushTriangle(q[b],q[b+1],q[b+2])}}}else{for(var b=0,M=g.length/3;b<M;b+=3){W.pushTriangle(b,b+1,b+2)}}}else if(R instanceof THREE.Geometry){var Q=R.vertices;var X=R.faces;var Y=R.faceVertexUvs[0];O.getNormalMatrix(V);var Z=d.material;var $=Z instanceof THREE.MultiMaterial;var _=$===true?d.material:null;for(var ee=0,re=Q.length;ee<re;ee++){var te=Q[ee];T.copy(te);if(Z.morphTargets===true){var ne=R.morphTargets;var ie=d.morphTargetInfluences;for(var oe=0,ae=ne.length;oe<ae;oe++){var se=ie[oe];if(se===0)continue;var le=ne[oe];var ce=le.vertices[ee];T.x+=(ce.x-te.x)*se;T.y+=(ce.y-te.y)*se;T.z+=(ce.z-te.z)*se}}W.pushVertex(T.x,T.y,T.z)}for(var ue=0,pe=X.length;ue<pe;ue++){var fe=X[ue];Z=$===true?_.materials[fe.materialIndex]:d.material;if(Z===undefined)continue;var Ee=Z.side;var ve=a[fe.a];var de=a[fe.b];var he=a[fe.c];if(W.checkTriangleVisibility(ve,de,he)===false)continue;var me=W.checkBackfaceCulling(ve,de,he);if(Ee!==THREE.DoubleSide){if(Ee===THREE.FrontSide&&me===false)continue;if(Ee===THREE.BackSide&&me===true)continue}l=P();l.id=d.id;l.v1.copy(ve);l.v2.copy(de);l.v3.copy(he);l.normalModel.copy(fe.normal);if(me===false&&(Ee===THREE.BackSide||Ee===THREE.DoubleSide)){l.normalModel.negate()}l.normalModel.applyMatrix3(O).normalize();var Re=fe.vertexNormals;for(var xe=0,ye=Math.min(Re.length,3);xe<ye;xe++){var Te=l.vertexNormalsModel[xe];Te.copy(Re[xe]);if(me===false&&(Ee===THREE.BackSide||Ee===THREE.DoubleSide)){Te.negate()}Te.applyMatrix3(O).normalize()}l.vertexNormalsLength=Re.length;var He=Y[ue];if(He!==undefined){for(var we=0;we<3;we++){l.uvs[we].copy(He[we])}}l.color=fe.color;l.material=Z;l.z=(ve.positionScreen.z+de.positionScreen.z+he.positionScreen.z)/3;l.renderOrder=d.renderOrder;y.elements.push(l)}}}else if(d instanceof THREE.Line){if(R instanceof THREE.BufferGeometry){var x=R.attributes;if(x.position!==undefined){var g=x.position.array;for(var b=0,M=g.length;b<M;b+=3){W.pushVertex(g[b],g[b+1],g[b+2])}if(R.index!==null){var q=R.index.array;for(var b=0,M=q.length;b<M;b+=2){W.pushLine(q[b],q[b+1])}}else{var ge=d instanceof THREE.LineSegments?2:1;for(var b=0,M=g.length/3-1;b<M;b+=ge){W.pushLine(b,b+1)}}}}else if(R instanceof THREE.Geometry){j.multiplyMatrices(z,V);var Q=d.geometry.vertices;if(Q.length===0)continue;ve=F();ve.positionScreen.copy(Q[0]).applyMatrix4(j);var ge=d instanceof THREE.LineSegments?2:1;for(var ee=1,re=Q.length;ee<re;ee++){ve=F();ve.positionScreen.copy(Q[ee]).applyMatrix4(j);if((ee+1)%ge>0)continue;de=a[o-2];L.copy(ve.positionScreen);k.copy(de.positionScreen);if(I(L,k)===true){L.multiplyScalar(1/L.w);k.multiplyScalar(1/k.w);f=A();f.id=d.id;f.v1.positionScreen.copy(L);f.v2.positionScreen.copy(k);f.z=Math.max(L.z,k.z);f.renderOrder=d.renderOrder;f.material=d.material;if(d.material.vertexColors===THREE.VertexColors){f.vertexColors[0].copy(d.geometry.colors[ee]);f.vertexColors[1].copy(d.geometry.colors[ee-1])}y.elements.push(f)}}}}else if(d instanceof THREE.Sprite){H.set(V.elements[12],V.elements[13],V.elements[14],1);H.applyMatrix4(z);var be=1/H.w;H.z*=be;if(H.z>=-1&&H.z<=1){h=D();h.id=d.id;h.x=H.x*be;h.y=H.y*be;h.z=H.z;h.renderOrder=d.renderOrder;h.object=d;h.rotation=d.rotation;h.scale.x=d.scale.x*Math.abs(h.x-(H.x+n.projectionMatrix.elements[0])/(H.w+n.projectionMatrix.elements[12]));h.scale.y=d.scale.y*Math.abs(h.y-(H.y+n.projectionMatrix.elements[5])/(H.w+n.projectionMatrix.elements[13]));h.material=d.material;y.elements.push(h)}}}if(s===true){y.elements.sort(G)}return y};function B(){if(r===n){var e=new THREE.RenderableObject;t.push(e);n++;r++;return e}return t[r++]}function F(){if(o===s){var e=new THREE.RenderableVertex;a.push(e);s++;o++;return e}return a[o++]}function P(){if(c===p){var e=new THREE.RenderableFace;u.push(e);p++;c++;return e}return u[c++]}function A(){if(E===d){var e=new THREE.RenderableLine;v.push(e);d++;E++;return e}return v[E++]}function D(){if(m===x){var e=new THREE.RenderableSprite;R.push(e);x++;m++;return e}return R[m++]}function G(e,r){if(e.renderOrder!==r.renderOrder){return e.renderOrder-r.renderOrder}else if(e.z!==r.z){return r.z-e.z}else if(e.id!==r.id){return e.id-r.id}else{return 0}}function I(e,r){var t=0,n=1,i=e.z+e.w,o=r.z+r.w,a=-e.z+e.w,s=-r.z+r.w;if(i>=0&&o>=0&&a>=0&&s>=0){return true}else if(i<0&&o<0||a<0&&s<0){return false}else{if(i<0){t=Math.max(t,i/(i-o))}else if(o<0){n=Math.min(n,i/(i-o))}if(a<0){t=Math.max(t,a/(a-s))}else if(s<0){n=Math.min(n,a/(a-s))}if(n<t){return false}else{e.lerp(r,t);r.lerp(e,1-n);return true}}}};
//rebuild by neat 